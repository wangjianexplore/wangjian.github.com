webpackJsonp([9],{bLit:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=a("Dd8w"),e=a.n(i),n=a("R4Sj"),l=a("W36k"),c=a("61yR"),o=a("aozt"),r=a.n(o),u={name:"songDetail",components:{pageHeader:l.a,pageFooter:c.a},data:function(){return{hotComments:[],likeList:[],hotList:[],showFlag:!1,songs:{},lrc:[]}},computed:e()({},Object(n.b)(["getPlayInfo","getPlayList"])),mounted:function(){var t=this;t.getDetails(),t.getComment(),t.getLrc(),t.getHotList(),t.getLikeUser()},methods:e()({},Object(n.c)(["setPlayInfo","setPlayList"]),{playMusic:function(){for(var t=this,s=0,a=0;a<t.getPlayList.list.length;a++){if(t.getPlayList.list[a].id==t.$route.params.id){s=a,t.getPlayInfo.index===a&&t.setPlayInfo({restart:!t.getPlayInfo.restart});break}}0==s&&(t.getPlayList.list.push(t.songs),s=t.getPlayList.list.length-1),t.setPlayInfo({curlength:0,currentTime:0,index:s,onplayflag:!0,name:t.songs.name,singer:t.songs.ar[0].name,picurl:t.songs.al.picUrl,musicurl:"https://music.163.com/song/media/outer/url?id="+t.$route.params.id+".mp3",id:t.$route.params.id,lrc:t.lrc})},getDetails:function(){var t=this;r.a.get("http://musicapi.leanapp.cn/song/detail",{params:{ids:t.$route.params.id}}).then(function(s){t.songs=s.data.songs[0]}).catch(function(t){console.log(t)})},getLikeUser:function(){var t=this;r.a.get("http://musicapi.leanapp.cn/simi/user",{params:{id:t.$route.params.id}}).then(function(s){t.lrc=t.parseLrc(s.data.lrc.lyric)}).catch(function(t){console.log(t)})},getLrc:function(){var t=this;r.a.get("http://musicapi.leanapp.cn/lyric",{params:{id:t.$route.params.id}}).then(function(s){t.lrc=t.parseLrc(s.data.lrc.lyric)}).catch(function(t){console.log(t)})},parseLrc:function(t){for(var s=t.split("\n"),a=[],i=0;i<s.length;i++)if(""!=s[i]){var e=s[i].split("]");if(e.length>1){var n=e[0].substring(1,e[0].length+1),l=e[1];""!=l&&a.push({offset:n,text:l})}}return a},getComment:function(){var t=this;r.a.get("http://musicapi.leanapp.cn/comment/music",{params:{id:t.getPlayInfo.id}}).then(function(s){t.hotComments=s.data.hotComments}).catch(function(t){console.log(t)})},getHotList:function(){var t=this;r.a.get("http://musicapi.leanapp.cn/top/playlist",{params:{limit:5,order:"hot"}}).then(function(s){t.hotList=s.data.playlists}).catch(function(t){console.log(t)})}})},g={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"listDetails"},[a("page-header",{attrs:{menuNum:1}}),t._v(" "),a("discoverTag",{attrs:{liNum:0}}),t._v(" "),a("div",{staticClass:"layout"},[a("div",{staticClass:"lay-main"},[a("div",{staticClass:"layleft"},[a("div",{staticClass:"left-main"},[a("div",{staticClass:"myr_top"},[a("div",{staticClass:"w_img"},[0!=Object.keys(t.songs).length?a("img",{staticClass:"img",attrs:{src:t.songs.al.picUrl,alt:""}}):t._e(),t._v(" "),a("span",{staticClass:"sp_back"})]),t._v(" "),a("div",{staticClass:"cnt"},[a("div",{staticClass:"line01"},[a("span",{staticClass:"logo"}),t._v(" "),a("span",{staticClass:"title"},[t._v(t._s(t.songs.name))])]),t._v(" "),a("div",{staticClass:"line02"},[a("span",{staticClass:"create"},[t._v("歌手：")]),t._v(" "),0!=Object.keys(t.songs).length?a("span",{staticClass:"name"},[t._v(t._s(t.songs.ar[0].name))]):t._e()]),t._v(" "),a("div",{staticClass:"line02"},[a("span",{staticClass:"create"},[t._v("所属专辑：")]),t._v(" "),0!=Object.keys(t.songs).length?a("span",{staticClass:"name"},[t._v(t._s(t.songs.al.name))]):t._e()]),t._v(" "),a("div",{staticClass:"play"},[a("ul",[a("li",{staticClass:"li_one",on:{click:function(s){t.playMusic()}}},[t._v("\n                                        播放\n                                    ")]),t._v(" "),a("li",{staticClass:"li_two"}),t._v(" "),a("li",{staticClass:"li_three"},[t._v("收藏")]),t._v(" "),a("li",{staticClass:"li_four"},[t._v("分享")]),t._v(" "),a("li",{staticClass:"li_five"},[t._v("下载")]),t._v(" "),a("li",{staticClass:"li_six"},[t._v("("+t._s(t.hotComments.length)+")")])])]),t._v(" "),a("div",{staticClass:"desc",class:{desc_auto:t.showFlag}},t._l(t.lrc,function(s,i){return a("p",{key:i,ref:"p_lrc",refInFor:!0,staticClass:"p_lrc",domProps:{textContent:t._s(s.text)}})}),0),t._v(" "),a("div",{staticClass:"open"},[a("span",{staticClass:"span_icon",on:{click:function(s){t.showFlag=!t.showFlag}}},[t._v(t._s(0==t.showFlag?"展开":"收起")),a("i",{staticClass:"u-icn",class:{u_icn2:1==t.showFlag}})])])])]),t._v(" "),a("comments",{attrs:{hotComments:t.hotComments,styleFlag:!0}})],1)]),t._v(" "),a("div",{staticClass:"layright"},[a("div",{staticClass:"hotSong"},[a("h3",{staticClass:"hot_top"},[t._v("热门歌单")]),t._v(" "),a("ul",t._l(t.hotList,function(s,i){return a("li",{key:i,staticClass:"li"},[a("img",{staticClass:"img",attrs:{src:s.coverImgUrl,alt:""},on:{click:function(a){t.$router.push("/listDetails/"+s.id)}}}),t._v(" "),a("div",{staticClass:"li_info"},[a("div",{staticClass:"title",on:{click:function(a){t.$router.push("/listDetails/"+s.id)}}},[t._v(t._s(s.name))]),t._v(" "),a("div",{staticClass:"num_auth"},[t._v("by "+t._s(s.creator.nickname))])])])}),0)])])])]),t._v(" "),a("page-footer")],1)},staticRenderFns:[]};var p=a("VU/8")(u,g,!1,function(t){a("oTEU")},"data-v-7037d02a",null);s.default=p.exports},oTEU:function(t,s){}});
//# sourceMappingURL=9.812b0a603d7e8e903a8a.js.map